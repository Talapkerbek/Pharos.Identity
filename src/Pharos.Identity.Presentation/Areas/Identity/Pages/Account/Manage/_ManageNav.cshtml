@using Microsoft.Extensions.Localization
@using Pharos.Identity.Infra
@using Pharos.Identity.Infra.Data
@inject SignInManager<ApplicationUser> SignInManager
@inject IStringLocalizer<SharedResource> Localizer;

@{
    var hasExternalLogins = (await SignInManager.GetExternalAuthenticationSchemesAsync()).Any();
}

<div class="w-full">
    <nav class="bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm px-5">
        <!-- Header -->
        <div>
            <h6 class="uppercase text-secondary font-semibold">@Localizer["Settings"]</h6>
            <div class="h-px bg-muted mt-2"></div>
        </div>

        <!-- Links -->
        <ul class="flex flex-col gap-2">
            <li>
                <a asp-page="./Index"
                   class="flex items-center gap-2 px-3 py-2 rounded-md text-card-foreground hover:bg-primary hover:text-primary-foreground transition-all duration-200 @(ManageNavPages.IndexNavClass(ViewContext) == "active" ? "bg-primary text-primary-foreground" : "")">
                    <i class="bi bi-person-circle text-lg"></i>@Localizer["Profile"]
                </a>
            </li>
            <li>
                <a asp-page="./Email"
                   class="flex items-center gap-2 px-3 py-2 rounded-md text-card-foreground hover:bg-primary hover:text-primary-foreground transition-all duration-200 @(ManageNavPages.EmailNavClass(ViewContext) == "active" ? "bg-primary text-primary-foreground" : "")">
                    <i class="bi bi-envelope text-lg"></i>@Localizer["Email"]
                </a>
            </li>
            <li>
                <a asp-page="./ChangePassword"
                   class="flex items-center gap-2 px-3 py-2 rounded-md text-card-foreground hover:bg-primary hover:text-primary-foreground transition-all duration-200 @(ManageNavPages.ChangePasswordNavClass(ViewContext) == "active" ? "bg-primary text-primary-foreground" : "")">
                    <i class="bi bi-lock text-lg"></i>@Localizer["Password"]
                </a>
            </li>
            @if (hasExternalLogins)
            {
                <li>
                    <a asp-page="./ExternalLogins"
                       class="flex items-center gap-2 px-3 py-2 rounded-md text-card-foreground hover:bg-primary hover:text-primary-foreground transition-all duration-200 @(ManageNavPages.ExternalLoginsNavClass(ViewContext) == "active" ? "bg-primary text-primary-foreground" : "")">
                        <i class="bi bi-box-arrow-in-right text-lg"></i>@Localizer["External logins"]
                    </a>
                </li>
            }
            <li>
                <a asp-page="./TwoFactorAuthentication"
                   class="flex items-center gap-2 px-3 py-2 rounded-md text-card-foreground hover:bg-primary hover:text-primary-foreground transition-all duration-200 @(ManageNavPages.TwoFactorAuthenticationNavClass(ViewContext) == "active" ? "bg-primary text-primary-foreground" : "")">
                    <i class="bi bi-shield-lock text-lg"></i>@Localizer["Two-factor authentication"]
                </a>
            </li>
            <li>
                <a asp-page="./PersonalData"
                   class="flex items-center gap-2 px-3 py-2 rounded-md text-card-foreground hover:bg-primary hover:text-primary-foreground transition-all duration-200 @(ManageNavPages.PersonalDataNavClass(ViewContext) == "active" ? "bg-primary text-primary-foreground" : "")">
                    <i class="bi bi-person-lines-fill text-lg"></i>@Localizer["Personal data"]
                </a>
            </li>
        </ul>
    </nav>
</div>

